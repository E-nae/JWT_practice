# JWT_practice
JWT 프로젝트

1. React, Typescript, Node Express, jsonwebtoken, axios, Redux, tanstack-Query, Redis, mysql, MUI 사용
2. 기여도: frontend 100% / backend 100%
3. 성과
   1) 보안 강화
   2) 이용자 로그인 편의성 향상

--------------------------------------------------------------------------------

1. 프로세스
   1) 아이디/패스워드 로그인
   2) 액세스/리프레시 토큰 발급 및 리프레시 토큰 DB저장
      - 브라우저 쿠키에 저장
      - 토큰 생성 키는 암호화 후 redis 저장
      - 액세스 토큰 유효시간: 1시간
      - 리프레시 토큰 유효시간: 14일
   3) 재접속 시 액세스 토큰 유효성 검사
   4) 액세스 토큰이 유효한 경우 로그인 과정 패스 / 유효하지 않은 경우 리프레시 토큰 검증
      - 리프레시 토큰의 유효기간이 임박한 경우 자동 재발급 
   5) 리프레시 토큰이 유효한 경우 로그인 과정 패스 / 유효하지 않은 경우 로그인 화면 노출
   6) 로그아웃 시 액세스 / 리프레시 토큰 모두 삭제

2. 설계 전략
   1) 프론트엔드 설계
      ⅰ) 상태 관리: Redux 선택 이유: 코드가 상대적으로 사용이 복잡하지만, 한 번 구조를 갖추어 놓으면 대규모 프로젝트에서의 사용이 용이함. reducer 관리를 잘 해야한다는 점은 있음. 
        · 사이트 이용 권한 여부: jwt 인증을 통과해야만 부여
        · 이용자 아이디
   ⅱ) 캐싱: tanstack query
     - 암호화된 이용자 정보 캐싱: 인증 완료 후 서버로부터 이용자 정보를 인수
     - 사용 이유: 사용자 정보를 여러 컴포넌트에서 동시에 요청하여 메모리 낭비, 서버 자원 낭비이기 때문에 자원을 절약하고자 하나의 쿼리로 관리하여 캐싱된 이용자 정보를 사용하도록 함.
   ⅲ) 모든 페이지에서 jwt 인증 실행: 이용자가 아이디/패스워드 로그인을 하거나 로그인을 하지 않은 상태인 경우(로그인 페이지)를 제외하고 모든 페이지에서 검증을 하여 권한 확인
   ⅳ) 리프레시 토큰 재발급 처리: <1>, <2> 두 가지 방법 중 <1> 선택
      · 리프레시 토큰의 유효기간이 임박한 경우 자동 재발급: 장기 미로그인 상태만 아니면 자동 로그인 지속
      · 리프레시 토큰이 만료되면 강제 아이디/패스워드 재로그인

   2) 백엔드 설계
      (1) jwt 인증: jsonwebtoken
         - 가장 대중적으로 사용되는 라이브러리로, 안정성이 높음
      (2) jwt 토큰 발행 키
         - public.key와 private.key를 생성하여 서버에서만 사용할 수 있도록 지정. 보안성이 높음
      (3) 사용자 정보 암호화/복호화 키 관리: Redis
         - 클라이언트에서 키를 관리 하지 않아 보안성을 높임
         - 클라이언트에서 복호화할 때마다 서버에 키를 요청하므로 서버의 부담을 덜기 위해 가볍고 빠른 Redis를 활용
        

